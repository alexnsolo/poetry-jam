<div class="poem-view">
	<a ui-sref="home">Back to Home</a>

	<div class="poem-name" ng-hide="isPoemOwner()">
		<span>{{poem.name}}</span>
		<span ng-hide="poem.name">(Untitled)</span>
	</div>
	<input class="poem-name"
			type="text"
			placeholder="Untitled"
			ng-model="poem.name"
			ng-show="isPoemOwner()">

		<div class="lines-list">
			<div class="line" ng-repeat="line in lines" ng-switch="line.type">
				<div ng-switch-when="text">
					<div class="line-text">
						<span>{{line.text}}</span>
						<span ng-hide="line.text">(New Line)</span>
					</div>
					<div class="line-suggestions" ng-if="!line.isFinalized">
						<div class="line-suggestion" ng-repeat="suggestion in line.suggestions">
							<div class="suggestion-text">{{suggestion.text}}</div>
							<button class="choose-suggestion-btn"
									ng-click="chooseSuggestion(line, suggestion)"
									ng-show="isPoemOwner()">
								Choose
							</button>
						</div>
						<div class="new-suggestion">
							<input class="new-suggestion-text"
									type="text"
									ng-model="line.$newSuggestionText"
									on-enter="addSuggestion(line)"
									placeholder="Suggest a line">
						</div>
					</div>
				</div>

				<hr class="line-break" ng-switch-when="break">
			</div>
		</div>

		<div class="controls" ng-show="isPoemOwner() && !poem.isFinalized">
			<button class="new-line-btn" ng-click="addNewLine()">Add a New Line</button>
			<button class="new-line-btn" ng-click="addNewBreak()">Add a Break</button>
			<br>
			<button class="finalize-poem-btn" ng-click="finalizePoem()">Finish</button>
		</div>
</div>
